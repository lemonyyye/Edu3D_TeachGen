<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planet Size Comparison (Exportable GLTF)</title>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/exporters/GLTFExporter.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; color: #fff; font-family: sans-serif; }
        #container { width: 100vw; height: 100vh; }
        #info { position: absolute; top: 20px; width: 100%; text-align: center; z-index: 100; font-size: 1.2em; text-shadow: 0 0 10px #000; }
        #controls { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 10; background: rgba(40, 40, 40, 0.85); padding: 10px 20px; border-radius: 25px; }
        #controls button { background: #444; color: #eee; border: none; padding: 8px 15px; margin: 0 5px; border-radius: 20px; cursor: pointer; font-size: 0.9em; transition: all 0.2s; }
        #controls button:hover { background: #666; color: #fff; }
    </style>
</head>
<body>
    <div id="container"></div>
    <div id="info">Planet Size Comparison (Click 'Export GLTF' to save)</div>
    <div id="controls">
        <button id="exportGltf">Export GLTF</button>
    </div>

    <script>
        // 1. 初始化场景
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);

        // 2. 初始化相机
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 50;

        // 3. 初始化渲染器
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.getElementById('container').appendChild(renderer.domElement);

        // 4. 光照
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set(0, 10, 10);
        scene.add(directionalLight);

        // 5. 行星数据（真实比例，近距离排列）
        const planetData = [
            { name: 'Jupiter', radius: 11.2, distance: -25, color: 0xe6b89c },
            { name: 'Earth', radius: 1, distance: 0, color: 0x4a90e2 },
            { name: 'Venus', radius: 0.95, distance: 10, color: 0xf5a623 },
            { name: 'Mars', radius: 0.53, distance: 18, color: 0xe74c3c }
        ];

        // 6. 创建行星并添加到场景
        planetData.forEach(data => {
            const geometry = new THREE.SphereGeometry(data.radius, 32, 32);
            const material = new THREE.MeshPhongMaterial({ color: data.color });
            const planet = new THREE.Mesh(geometry, material);
            planet.name = data.name;
            planet.position.x = data.distance;
            scene.add(planet);
        });

        // 7. 动画循环
        function animate() {
            requestAnimationFrame(animate);
            scene.traverse(child => {
                if (child.isMesh) {
                    child.rotation.y += 0.005;
                }
            });
            renderer.render(scene, camera);
        }
        animate();

        // 8. 导出GLTF功能
        document.getElementById('exportGltf').addEventListener('click', () => {
            const exporter = new THREE.GLTFExporter();
            exporter.parse(scene, (result) => {
                const output = JSON.stringify(result, null, 2);
                saveAs(new Blob([output], { type: 'application/json' }), 'planets_comparison.gltf');
            });
        });
    </script>
</body>
</html>